(this["webpackJsonphello-world"]=this["webpackJsonphello-world"]||[]).push([[0],{139:function(e,t,a){e.exports=function(){return new Worker(a.p+"cfb6bf3bdc9c9c886b7f.worker.js")}},171:function(e,t,a){e.exports=a(358)},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},357:function(e,t,a){},358:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(45),l=a.n(i),o=(a(176),a(46)),s=a(47),c=a(51),d=a(48),u=a(52),f=Object.freeze({HUMAN_PLAY:"Human Play",BOT_PLAY:"Bot Play",BOT_TRAIN:"Bot Train"});a(177),a(178);var g=function(e){var t=e.col+1,a=e.row+1,n={gridColumnStart:t,gridColumnEnd:t+1,gridRowStart:a,gridRowEnd:a+1},i=e.data.agent?" agent":"",l=1===t&&1===a?" start":"";return r.a.createElement("div",{onClick:e.switch,style:n,className:"gridSquare "+e.data.type+i+l},null)},m=(a(179),a(140)),h=a(54);function p(e){var t=e.data,a=e.title,n=e.style;return r.a.createElement("div",{style:Object(m.a)({},n,{textAlign:"center"})},r.a.createElement("h3",null,a),r.a.createElement(h.b,{width:400,height:200,data:t.map((function(e){return{data:e}})),title:"title"},r.a.createElement(h.a,{type:"monotone",dataKey:"data",stroke:"#8884d8"}),r.a.createElement(h.c,null)))}var v=function(e){var t=e.data.length,a=e.data[0].length,n={gridTemplateColumns:"60px ".repeat(a)+"auto",gridTemplateRows:"60px ".repeat(t)+"20px"},i=function(t,a){return function(){e.switchType(t,a)}},l=e.data.map((function(e,t){return e.map((function(e,a){return r.a.createElement(g,{switch:i(t,a),row:t,col:a,data:e,key:"".concat(t).concat(a)})})).flat()}));return r.a.createElement("div",{className:"grid",style:n,ref:e.aRef,onKeyDown:e.keyDownFunc,tabIndex:0},l,r.a.createElement(p,{style:{gridColumnStart:a+1,gridColumnEnd:a+2,gridRowStart:1,gridRowEnd:t+1},title:"Bot Rewards History",data:e.rewardsData}),r.a.createElement("p",{style:{gridColumnStart:1,gridColumnEnd:4,gridRowStart:t+1,gridRowEnd:t+2}},"Current Reward: ",Math.floor(10*e.currReward)/10),r.a.createElement("p",{style:{gridColumnStart:4,gridColumnEnd:7,gridRowStart:t+1,gridRowEnd:t+2}},"Last Reward: ",Math.floor(10*e.lastReward)/10||"_"))},w=(a(357),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).updateFailRate=function(e){a.setState({failRate:e.target.value}),a.props.updateFailRate(e)},a.updateCostOfLiving=function(e){a.setState({costOfLiving:e.target.value}),a.props.updateCostOfLiving(e)},a.props=e,a.state={costOfLiving:-.2,failRate:.1},a.colRef=r.a.createRef(),a.failRef=r.a.createRef(),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"controlPanel"},r.a.createElement("div",null,Object.values(f).map((function(t,a){return r.a.createElement("button",{onClick:function(){return e.props.setMode(t)},className:"mode".concat(t===e.props.mode?" selected":""),key:a},t)})),r.a.createElement("div",{style:{width:"10px",display:"inline-block"}}),r.a.createElement("button",{onClick:this.props.trainAsync},"Train Asynchronously"),r.a.createElement("br",null),r.a.createElement("label",null,"Cost of Living: "),r.a.createElement("input",{value:this.state.costOfLiving,onChange:this.updateCostOfLiving,max:0,min:-10,step:.1,type:"number",ref:this.colRef,onClick:function(){return e.colRef.current.focus()}}),r.a.createElement("br",null),r.a.createElement("label",null,"Fail Rate: "),r.a.createElement("input",{value:this.state.failRate,onChange:this.updateFailRate,min:0,max:1,type:"number",step:.1,ref:this.failRef,onClick:function(){return e.failRef.current.focus()}}),r.a.createElement("br",null)),r.a.createElement("ol",null,r.a.createElement("li",null,"Left click to edit board"),r.a.createElement("li",null,"Use arrow keys to move agent"),r.a.createElement("li",null,'The "Fail Rate" will determine the likelihood of the agent moving unexpectedly'),r.a.createElement("li",null,'Collect "Cost of Living" reward with every move'),r.a.createElement("li",null,'Collect +10 reward for running into a green "end state"'),r.a.createElement("li",null,'Collect -10 reward for running into a red "end state"'),r.a.createElement("li",null,"See how the bot does, and read more about\xa0",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Q-learning"},"Q-Learning"),"!")))}}]),t}(r.a.Component)),R=a(139),y=a.n(R),b=a(55),E=function(e,t,a,n,r){var i=Math.random(),l=t;i<r/2?l++:i<r&&l--,l%=4;var o=a.slice();switch(l){case 0:o[1]--;break;case 1:o[0]--;break;case 2:o[1]++;break;case 3:o[0]++}(o[0]<0||o[0]>=e.length||o[1]<0||o[1]>=e[0].length)&&(o=a);var s,c=n,d=!1;switch(e[o[0]][o[1]].type){case"normal":s=Math.max.apply(Math,Object(b.a)(e[o[0]][o[1]].qVals));break;case"wall":o=a,s=Math.max.apply(Math,Object(b.a)(e[o[0]][o[1]].qVals));break;case"reward":c+=10,d=!0;break;case"cost":c+=-10,d=!0}return d&&(o=[0,0],s=0),{nextLoc:o,newQ:.999*e[a[0]][a[1]].qVals[t]+.001*(c+.999*s),changeInReward:c,gameover:d}};var k=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).focusDiv=function(){a.myRef.current.focus()},a.switchType=function(e,t){var n=a.state.grid.slice();switch(n[e]=n[e].slice(),n[e][t].type){case"normal":n[e][t].type="wall";break;case"wall":n[e][t].type="reward";break;case"reward":n[e][t].type="cost";break;case"cost":n[e][t].type="normal"}a.setState({grid:n})},a.handleKeyDown=function(e){if(!(a.state.mode!==f.HUMAN_PLAY||e.keyCode<37||e.keyCode>40)){e.preventDefault();var t=e.keyCode-37,n=E(a.state.grid,t,a.state.agent,a.state.costOfLiving,a.state.failRate),r=n.nextLoc,i=n.newQ,l=n.changeInReward,o=n.gameover;a.updateState(t,r,i,l,o)}},a.setMode=function(e){if(a.state.mode!==e){clearInterval(a.state.botInterval);var t=null;e===f.BOT_TRAIN?t=setInterval(a.botMove,50):e===f.BOT_PLAY&&(t=setInterval(a.botMove,150)),a.setState({mode:e,botInterval:t})}},a.botMove=function(){var e=a.state.mode===f.BOT_TRAIN?.8:1,t=function(e,t,a){if(Math.random()<a){var n=e[t[0]][t[1]],r=Math.max.apply(Math,Object(b.a)(n.qVals)),i=[];return n.qVals.forEach((function(e,t){e===r&&i.push(t)})),i[Math.floor(Math.random()*i.length)]}return Math.floor(4*Math.random())}(a.state.grid,a.state.agent,e),n=E(a.state.grid,t,a.state.agent,a.state.costOfLiving,a.state.failRate),r=n.nextLoc,i=n.newQ,l=n.changeInReward,o=n.gameover;a.updateState(t,r,i,l,o)},a.updateState=function(e,t,n,r,i){var l=a.state.grid.slice();l[a.state.agent[0]]=l[a.state.agent[0]].slice(),l[t[0]]=l[t[0]].slice(),l[a.state.agent[0]][a.state.agent[1]].qVals[e]=n,l[a.state.agent[0]][a.state.agent[1]].agent=!1,l[t[0]][t[1]].agent=!0;var o=a.state.reward+r,s=a.state.lastReward;if(i&&a.state.mode!==f.HUMAN_PLAY){var c=a.state.botRewards.slice();c.push(o),a.setState({botRewards:c})}i&&(s=o,o=0),a.setState({reward:o,grid:l,lastReward:s,agent:t})},a.updateCostOfLiving=function(e){var t=parseFloat(e.target.value);!isNaN(t)&&t<=0&&t>=-10&&a.setState({costOfLiving:t})},a.updateFailRate=function(e){var t=parseFloat(e.target.value);!isNaN(t)&&t>=0&&t<=1&&a.setState({failRate:t})},a.trainAsync=function(){a.worker.postMessage({grid:a.state.grid,agent:a.state.agent,costOfLiving:a.state.costOfLiving,failRate:a.state.failRate})};for(var n=[0,0],i=[],l=1;l<=5;l++){var s=[];i.push(s);for(var u=1;u<=10;u++)s.push({type:"normal",agent:!1,qVals:[0,0,0,0]})}return i[n[0]][n[1]].agent=!0,a.state={grid:i,mode:f.HUMAN_PLAY,agent:n,reward:0,lastReward:"_",botRewards:[],costOfLiving:-.2,failRate:.1},a.myRef=r.a.createRef(),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.focusDiv(),this.worker=new y.a,this.worker.addEventListener("message",(function(t){var a=e.state.agent;t.data[a[0]][a[1]].agent=!0,e.setState({grid:t.data})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App",tabIndex:0,onClickCapture:this.focusDiv},r.a.createElement(w,{setMode:this.setMode,mode:this.state.mode,costOfLiving:this.state.costOfLiving,updateCostOfLiving:this.updateCostOfLiving,failRate:this.state.failRate,updateFailRate:this.updateFailRate,trainAsync:this.trainAsync}),r.a.createElement(v,{data:this.state.grid,rewardsData:this.state.botRewards,switchType:this.switchType,aRef:this.myRef,keyDownFunc:this.handleKeyDown,currReward:this.state.reward,lastReward:this.state.lastReward}))}}]),t}(r.a.Component);l.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[171,1,2]]]);
//# sourceMappingURL=main.f0dcfa54.chunk.js.map