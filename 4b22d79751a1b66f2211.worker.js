!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/qlearn-game/",r(r.s=0)}([function(t,e,r){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(c){a=!0,o=c}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.r(e);Object.freeze({HUMAN_PLAY:"Human Play",BOT_PLAY:"Bot Play",BOT_TRAIN:"Bot Train"});var o=function(t,e,r,n,o){var i=Math.random(),u=e;i<o/2?u++:i<o&&u--,u%=4;var c=r.slice();switch(u){case 0:c[1]--;break;case 1:c[0]--;break;case 2:c[1]++;break;case 3:c[0]++}(c[0]<0||c[0]>=t.length||c[1]<0||c[1]>=t[0].length)&&(c=r);var l,f=n,s=!1;switch(t[c[0]][c[1]].type){case"normal":l=Math.max.apply(Math,a(t[c[0]][c[1]].qVals));break;case"wall":c=r,l=Math.max.apply(Math,a(t[c[0]][c[1]].qVals));break;case"reward":f+=10,s=!0;break;case"cost":f+=-10,s=!0}return s&&(c=[0,0],l=0),{nextLoc:c,newQ:.9*t[r[0]][r[1]].qVals[e]+.1*(f+.99*l),changeInReward:f,gameover:s}};function i(t,e,r){var o=t[e[0]][e[1]];if(Math.random()<r){var i=Math.max.apply(Math,a(o.qVals)),u=[];return o.qVals.forEach((function(t,e){t===i&&u.push(e)})),u[Math.floor(Math.random()*u.length)]}return[0,1,2,3].reduce((function(t,e){var r=n(t,2),a=r[0],i=r[1];return i<o.counts[e]?[a,i]:[e,o.counts[e]]}),[-1,Math.inf])[0]}onmessage=function(t){if(t){var e=t.data,r=e.grid,n=e.agent,a=e.costOfLiving,u=e.failRate;r[n[0]][n[1]].agent=!1;for(var c=0;c<1e7;c++){var l=i(r,n,.8),f=o(r,l,n,a,u),s=f.nextLoc,p=f.newQ;r[n[0]][n[1]].qVals[l]=p,r[n[0]][n[1]].counts[l]++,n=s}postMessage(r)}}}]);
//# sourceMappingURL=4b22d79751a1b66f2211.worker.js.map